# UserController API 功能测试表格

## API 概述
UserController 提供了用户管理相关的 API，包括用户登录、注册、信息更新、删除以及获取当前用户信息等功能。

## 功能测试表格

| 序号 | API 接口 | HTTP 方法 | URL 路径 | 请求参数 | 预期响应 | 测试场景 | 测试步骤 | 预期结果 |
|------|---------|----------|---------|---------|---------|---------|---------|---------|
| 1 | 查看当前用户 | GET | /user | 无请求体，需要在请求头中包含有效的JWT令牌 | 返回当前登录用户的详细信息 | 1.1 有效令牌 | 1. 使用有效的JWT令牌发送请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：包含用户详细信息的JSON对象 |
| 2 | 查看当前用户 | GET | /user | 无请求体，请求头中包含无效的JWT令牌 | 返回未授权错误 | 1.2 无效令牌 | 1. 使用无效的JWT令牌发送请求<br>2. 检查响应状态码和内容 | 状态码：401 Unauthorized<br>响应体：错误信息 |
| 3 | 查看当前用户 | GET | /user | 无请求体，请求头中不包含JWT令牌 | 返回未授权错误 | 1.3 无令牌 | 1. 不带JWT令牌发送请求<br>2. 检查响应状态码和内容 | 状态码：401 Unauthorized<br>响应体：错误信息 |
| 4 | 用户账号登录 | POST | /user/login | ```{"loginText": "用户名", "password": "密码"}``` | 返回用户信息和JWT令牌 | 2.1 正确的用户名和密码 | 1. 发送包含正确用户名和密码的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：包含token和user对象的JSON |
| 5 | 用户账号登录 | POST | /user/login | ```{"loginText": "错误用户名", "password": "密码"}``` | 返回未授权错误 | 2.2 错误的用户名 | 1. 发送包含错误用户名的请求<br>2. 检查响应状态码和内容 | 状态码：401 Unauthorized<br>响应体："用户名或密码错误" |
| 6 | 用户账号登录 | POST | /user/login | ```{"loginText": "用户名", "password": "错误密码"}``` | 返回未授权错误 | 2.3 错误的密码 | 1. 发送包含错误密码的请求<br>2. 检查响应状态码和内容 | 状态码：401 Unauthorized<br>响应体："用户名或密码错误" |
| 7 | 用户账号登录 | POST | /user/login | ```{"loginText": ""}``` 或 ```{}``` | 返回错误 | 2.4 缺少必要参数 | 1. 发送缺少必要参数的请求<br>2. 检查响应状态码和内容 | 状态码：400 Bad Request 或 500 Internal Server Error<br>响应体：错误信息 |
| 8 | 用户人脸登录 | POST | /user/loginByFace | ```用户ID (整数)``` | 返回用户信息和JWT令牌 | 3.1 有效的用户ID | 1. 发送包含有效用户ID的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：包含token和user对象的JSON |
| 9 | 用户人脸登录 | POST | /user/loginByFace | ```不存在的用户ID``` | 返回未授权错误 | 3.2 无效的用户ID | 1. 发送包含不存在用户ID的请求<br>2. 检查响应状态码和内容 | 状态码：401 Unauthorized<br>响应体："用户名或密码错误" |
| 10 | 更新用户信息 | POST | /user/update | 包含用户信息的JSON对象，如：<br>```{"userid": 1, "username": "新用户名"}``` | 返回更新结果 | 4.1 有效的用户信息 | 1. 发送包含有效用户信息的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：1（表示成功更新的记录数） |
| 11 | 更新用户信息 | POST | /user/update | 包含无效用户ID的JSON对象 | 返回更新结果 | 4.2 无效的用户ID | 1. 发送包含无效用户ID的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：0（表示没有记录被更新） |
| 12 | 更新用户信息 | POST | /user/update | 缺少必要字段的JSON对象 | 返回错误 | 4.3 缺少必要字段 | 1. 发送缺少必要字段的请求<br>2. 检查响应状态码和内容 | 状态码：400 Bad Request 或 500 Internal Server Error<br>响应体：错误信息 |
| 13 | 注册用户信息 | POST | /user/register | ```{"loginText": "新用户名", "password": "密码"}``` | 返回注册结果 | 5.1 有效的注册信息 | 1. 发送包含有效注册信息的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：1（表示成功注册） |
| 14 | 注册用户信息 | POST | /user/register | ```{"loginText": "已存在用户名", "password": "密码"}``` | 返回注册失败结果 | 5.2 已存在的用户名 | 1. 发送包含已存在用户名的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：0（表示注册失败） |
| 15 | 注册用户信息 | POST | /user/register | 缺少必要字段的JSON对象 | 返回错误 | 5.3 缺少必要字段 | 1. 发送缺少必要字段的请求<br>2. 检查响应状态码和内容 | 状态码：400 Bad Request 或 500 Internal Server Error<br>响应体：错误信息 |
| 16 | 删除用户信息 | POST | /user/delete | ```用户ID (整数)``` | 返回删除结果 | 6.1 有效的用户ID | 1. 发送包含有效用户ID的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：1（表示成功删除） |
| 17 | 删除用户信息 | POST | /user/delete | ```不存在的用户ID``` | 返回删除结果 | 6.2 不存在的用户ID | 1. 发送包含不存在用户ID的请求<br>2. 检查响应状态码和内容 | 状态码：200 OK<br>响应体：0（表示没有记录被删除） |

## 测试注意事项

1. **认证要求**：除了登录和注册接口外，其他接口可能需要JWT令牌认证
2. **数据准备**：测试前需要准备测试数据，包括用户账号、密码等
3. **测试顺序**：建议按照注册 -> 登录 -> 查询 -> 更新 -> 删除的顺序进行测试
4. **边界测试**：应测试各种边界情况，如空值、特殊字符、超长字符串等
5. **安全测试**：应测试SQL注入、XSS等安全问题
6. **并发测试**：可测试多用户同时操作的情况

## 测试环境要求

1. 后端服务已正确部署并运行
2. 数据库已正确配置并包含必要的表结构
3. 测试工具（如Postman、JMeter等）已准备就绪